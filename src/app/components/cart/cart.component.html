<div class="container py-5">
  @if (cartProducts().length > 0) {
  <div class="row position-relative">
    <div class="col-md-4">
      <div class="p-3 text-white bg-secondary divposition rounded-2 mb-3">
        <h5 class="fw-bolder">Cart Total</h5>
        <h5>{{ totalPrice() }} EGP</h5>

        <div class="d-flex flex-row gap-2 flex-wrap">
          <button class="btn btn-primary">Check Out</button>
          <button class="btn btn-danger" (click)="clear()">Clear Cart</button>
        </div>
      </div>
    </div>

    <div class="col-md-8">
      <div
        class="d-flex flex-column align-items-center justify-content-center gap-3"
      >
        @for (product of cartProducts() ; track $index) {
        <div class="p-3 bg-secondary-subtle row rounded-2">
          <div
            class="col-sm-4 d-flex flex-column align-items-center justify-content-center"
          >
            <img
              [src]="product.product.imageCover"
              class="w-75 rounded-2 mb-3"
              alt="error"
            />
          </div>
          <div class="col-sm-8 row align-items-center justify-content-center">
            <div class="col-sm-9">
              <h5 class="text-secondary fw-semibold">
                {{ product.product.title.split(" ", 3).join(" ") }}
              </h5>
              <p class="text-secondary">price : {{ product.price }}</p>
              <h5>{{ product.price * product.count }}</h5>
              <button
                (click)="deleteItem(product.product.id)"
                class="border-0 bg-secondary-subtle text-danger"
              >
                <i class="fa-solid fa-trash"></i> Remove
              </button>
            </div>

            <div
              class="col-sm-3 d-flex flex-row align-items-center justify-content-center gap-3 text-success"
            >
              <i
                class="fa-solid fa-plus cr"
                (click)="update(product.product.id, product.count + 1)"
              ></i>
              <p class="text-dark pt-3">{{ product.count }}</p>
              <button
                (click)="update(product.product.id, product.count - 1)"
                class="border-0 bg-secondary-subtle text-success"
                [disabled]="product.count <= 1"
              >
                <i class="fa-solid fa-minus cr"></i>
              </button>
            </div>
          </div>
        </div>
        }
      </div>
    </div>
  </div>
  } @else {
  <div class="d-flex flex-column align-items-center justify-content-center">
    <div
      class="divwidth d-flex flex-column align-items-center justify-content-center"
    >
      <img src="./assets/img/empty.webp" class="mb-4 w-100" alt="error" />
      <button class="btn btn-outline-success" routerLink="/shop">
        Shop Now
      </button>
    </div>
  </div>
  }
</div>
